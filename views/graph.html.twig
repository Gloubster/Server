{% extends 'layout.html.twig' %}

{% block content %}

<style>
        .indice-0{
            background-color:yellow;
        }
        .indice-1{
            background-color:blue;
        }
        .indice-2{
            background-color:green;
        }
        .indice-3{
            background-color:red;
        }
        .indice-4{
            background-color:purple;
        }
</style>
    <h1>{{ stop - start }}s, {{ total }} jobs</h1>
    <h2>{{ total / (stop - start) }} jobs/second</h2>
    <h2>{{ avg }} s/job</h2>
    <div style="position:relative;width:100%;height:20px;">
        <div style="float:left;width:15px;height:15px" class="indice-0"></div> <span style="float:left;">HTTP</span>
        <div style="float:left;width:15px;height:15px" class="indice-1"></div> <span style="float:left;">Store</span>
        <div style="float:left;width:15px;height:15px" class="indice-2"></div> <span style="float:left;">Transform</span>
        <div style="float:left;width:15px;height:15px" class="indice-3"></div> <span style="float:left;">Fetch result</span>
        <div style="float:left;width:15px;height:15px" class="indice-4"></div> <span style="float:left;">Unlink</span>
    </div>

    {% for name, specs in workers %}
        <div style="position:relative;height:15px;">
            {{ name }}

            {% for spec in specs %}
                {% set left = ((spec.getStart() - start) * 10) + 200 %}
                {% set width = (spec.getStop() - spec.getStart()) * 10 %}
                <div style="border:1px solid black;position:absolute;top:0;left:{{left }}px;width:{{ width }}px;height:10px;">

                    {% set left = 0 %}
                    {% for indice, info in spec.getTimers() %}
                        {% set width = info * 10 %}
                        <div style="position:absolute;height:10px;left:{{left}}px;width:{{width}}px;" class="indice-{{ indice }}">

                        </div>
                        {% set left = left + width %}
                    {% endfor %}
                </div>

            {% endfor %}
        </div>
    {% endfor %}
{% endblock %}
